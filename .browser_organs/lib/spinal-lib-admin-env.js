(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
(function (global){(function (){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./connectorTS");var spinalCore=require("spinal-core-connectorjs");exports.spinalCore=spinalCore;var Model=spinalCore._def.Model;exports.Model=Model;var Str=spinalCore._def.Str;exports.Str=Str;var Bool=spinalCore._def.Bool;exports.Bool=Bool;var Val=spinalCore._def.Val;exports.Val=Val;var Lst=spinalCore._def.Lst;exports.Lst=Lst;var Directory=spinalCore._def.Directory;exports.Directory=Directory;var Vec=spinalCore._def.Vec;exports.Vec=Vec;var Path=spinalCore._def.Path;exports.Path=Path;var File=spinalCore._def.File;exports.File=File;var Ptr=spinalCore._def.Ptr;exports.Ptr=Ptr;var Choice=spinalCore._def.Choice;exports.Choice=Choice;var TypedArray=spinalCore._def.TypedArray;exports.TypedArray=TypedArray;var TypedArray_Int32=spinalCore._def.TypedArray_Int32;exports.TypedArray_Int32=TypedArray_Int32;var TypedArray_Float64=spinalCore._def.TypedArray_Float64;exports.TypedArray_Float64=TypedArray_Float64;var Process=spinalCore._def.Process;exports.Process=Process;var BindProcess=spinalCore._def.BindProcess;exports.BindProcess=BindProcess;var globalAny="undefined"==typeof window?global:window,FileSystem=globalAny.FileSystem;exports.FileSystem=FileSystem;var Pbr=spinalCore._def.Pbr;exports.Pbr=Pbr,exports.default=spinalCore;

}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./connectorTS":2,"spinal-core-connectorjs":"spinal-core-connectorjs"}],2:[function(require,module,exports){
"use strict";

},{}],3:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var spinal_core_connectorjs_type_1=require("spinal-core-connectorjs_type"),AppProfile=function(e){function AppProfile(e,t){_classCallCheck(this,AppProfile);var o=_possibleConstructorReturn(this,(AppProfile.__proto__||Object.getPrototypeOf(AppProfile)).call(this));return o.add_attr({id:e,description:t}),o}return _inherits(AppProfile,spinal_core_connectorjs_type_1.Model),AppProfile}();exports.AppProfile=AppProfile,spinal_core_connectorjs_type_1.spinalCore.register_models(AppProfile);

},{"spinal-core-connectorjs_type":1}],4:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var spinal_core_connectorjs_type_1=require("spinal-core-connectorjs_type"),AppProfileLst=function(e){function AppProfileLst(){_classCallCheck(this,AppProfileLst);var e=_possibleConstructorReturn(this,(AppProfileLst.__proto__||Object.getPrototypeOf(AppProfileLst)).call(this));return e.add_attr({apps:new spinal_core_connectorjs_type_1.Lst}),e}return _inherits(AppProfileLst,spinal_core_connectorjs_type_1.Model),AppProfileLst}();exports.AppProfileLst=AppProfileLst,spinal_core_connectorjs_type_1.spinalCore.register_models(AppProfileLst);

},{"spinal-core-connectorjs_type":1}],5:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var spinal_core_connectorjs_type_1=require("spinal-core-connectorjs_type"),Role=function(e){function Role(e,t,o){_classCallCheck(this,Role);var r=_possibleConstructorReturn(this,(Role.__proto__||Object.getPrototypeOf(Role)).call(this));return r.add_attr({id:e,name:t,description:o}),r}return _inherits(Role,spinal_core_connectorjs_type_1.Model),Role}();exports.Role=Role,spinal_core_connectorjs_type_1.spinalCore.register_models(Role);

},{"spinal-core-connectorjs_type":1}],6:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var spinal_core_connectorjs_type_1=require("spinal-core-connectorjs_type"),RoleLst=function(e){function RoleLst(){_classCallCheck(this,RoleLst);var e=_possibleConstructorReturn(this,(RoleLst.__proto__||Object.getPrototypeOf(RoleLst)).call(this));return e.add_attr({users:new spinal_core_connectorjs_type_1.Lst}),e}return _inherits(RoleLst,spinal_core_connectorjs_type_1.Model),RoleLst}();exports.RoleLst=RoleLst,spinal_core_connectorjs_type_1.spinalCore.register_models(RoleLst);

},{"spinal-core-connectorjs_type":1}],7:[function(require,module,exports){
"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(exports,"__esModule",{value:!0});var spinal_core_connectorjs_type_1=require("spinal-core-connectorjs_type"),UserProfile=function(e){function UserProfile(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,UserProfile);var r=_possibleConstructorReturn(this,(UserProfile.__proto__||Object.getPrototypeOf(UserProfile)).call(this));return r.add_attr({appProfiles:e}),r}return _inherits(UserProfile,spinal_core_connectorjs_type_1.Model),UserProfile}();exports.UserProfile=UserProfile,spinal_core_connectorjs_type_1.spinalCore.register_models(UserProfile);

},{"spinal-core-connectorjs_type":1}],8:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(e,n){for(var i=0;i<n.length;i++){var t=n[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,n,i){return n&&defineProperties(e.prototype,n),i&&defineProperties(e,i),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var RoleLst_1=require("./Models/RoleLst"),Role_1=require("./Models/Role"),UserProfile_1=require("./Models/UserProfile"),AppProfileLst_1=require("./Models/AppProfileLst"),AppProfile_1=require("./Models/AppProfile"),spinal_core_connectorjs_type_1=require("spinal-core-connectorjs_type"),loadModelPtr_1=require("./loadModelPtr"),CONFIG_PATH="/etc/config/",USERS_FILE_PATH="/etc/users",USERS_PROFILE_DIR_NAME="UserProfileDir",ROLE_LST_PATH=CONFIG_PATH+"UserProfileLst",APP_PROFILE_LST_PATH=CONFIG_PATH+"AppProfileLst",ADMIN_NAME="Admin",ADMIN_DESCRIPTION="Administrator of the spinal platform",INTEGRATOR_NAME="Intégrateur",INTEGRATOR_DESCRIPTION="Intégrateur description",MAINTAINER_NAME="Mainteneur",MAINTAINER_DESCRIPTION="Mainteneur description",ASSET_MANAGER_NAME="Asset Manager",DEFAULT_USER_NAME="Basic Utilisateur",DEFAULT_USER_DESCRIPTION="Defaut utilisateur description",USERS_DIR="__users__",PUBLIC_DIR="public",PUBLIC_DIR_PATH=USERS_DIR+"/"+PUBLIC_DIR,USERS=[{name:ADMIN_NAME,description:ADMIN_DESCRIPTION},{name:INTEGRATOR_NAME,description:INTEGRATOR_DESCRIPTION},{name:MAINTAINER_NAME,description:MAINTAINER_DESCRIPTION},{name:ASSET_MANAGER_NAME,description:ASSET_MANAGER_NAME},{name:DEFAULT_USER_NAME,description:DEFAULT_USER_DESCRIPTION}],SpinalAdminInit=function(){function SpinalAdminInit(){_classCallCheck(this,SpinalAdminInit)}return _createClass(SpinalAdminInit,null,[{key:"wait",value:function(){return new Promise(function(e){setTimeout(function(){e()},1e3)})}},{key:"init",value:function(e,n){var i=this;return e.wait_connect().then(SpinalAdminInit.wait).then(function(){return SpinalAdminInit.initRoleLst(n).then(SpinalAdminInit.initAppProfileLst.bind(i,n)).then(SpinalAdminInit.initDefaultUser.bind(i,n)).then(SpinalAdminInit.initPublicDir.bind(i,n))})}},{key:"initRoleLst",value:function(e){return e.load(ROLE_LST_PATH).then(SpinalAdminInit.onRoleLstLoadSuccessful).catch(SpinalAdminInit.onRoleLstLoadFail.bind(this,e))}},{key:"initAppProfileLst",value:function(e){return e.load(APP_PROFILE_LST_PATH).then(SpinalAdminInit.onAppProfileLstLoadSuccessful).catch(SpinalAdminInit.onAppProfileLstLoadFail.bind(this,e))}},{key:"initPublicDir",value:function(e){return e.load(USERS_DIR).then(SpinalAdminInit.onInitPublicDir)}},{key:"getFileTargetServerId",value:function(e){var n=e._ptr;return n.data.value?n.data.value:n.data.model._server_id}},{key:"getOrCreatePublicDir",value:function(e){var n=e.detect(function(e){return e.name.get()===PUBLIC_DIR});if(!n){var i=new spinal_core_connectorjs_type_1.Directory;return e.add_file(PUBLIC_DIR,i),Promise.resolve(i)}return loadModelPtr_1.loadModelPtr(n)}},{key:"onInitPublicDir",value:function(e){return SpinalAdminInit.getOrCreatePublicDir(e).then(function(n){for(var i=0;i<e.length;i++)e[i].name.get()!==PUBLIC_DIR&&e[i]._info&&!e[i]._info.publicDir&&e[i]._info.add_attr("publicDir",new spinal_core_connectorjs_type_1.Ptr(n))})}},{key:"onRoleLstLoadSuccessful",value:function(){return Promise.resolve()}},{key:"onRoleLstLoadFail",value:function(e){for(var n=new RoleLst_1.RoleLst,i=0;i<USERS.length;i++){var t=USERS[i];n.users.push(new Role_1.Role(i,t.name,t.description))}return e.store(n,ROLE_LST_PATH).then(SpinalAdminInit.onRoleLstLoadSuccessful).catch(function(){return console.log("store rejection from onUserProfileLstLoadFail"),Promise.resolve()})}},{key:"onAppProfileLstLoadSuccessful",value:function(){return Promise.resolve()}},{key:"onAppProfileLstLoadFail",value:function(e){for(var n=new AppProfileLst_1.AppProfileLst,i=0;i<32;i++)n.apps.push(new AppProfile_1.AppProfile(i+1,"id des profile utilisateur en binair inverser"));return e.store(n,APP_PROFILE_LST_PATH).then(SpinalAdminInit.onAppProfileLstLoadSuccessful).catch(function(){return console.log("store rejection from onAppProfileLstLoadFail"),Promise.resolve()})}},{key:"getUserProfileDir",value:function(e){return e.load("/etc").then(function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===USERS_PROFILE_DIR_NAME)return i}var t=new spinal_core_connectorjs_type_1.Directory;return e.add_file(USERS_PROFILE_DIR_NAME,t),t})}},{key:"initDefaultUser",value:function(e){return SpinalAdminInit.getUserProfileDir(e).then(function(n){return e.load(USERS_FILE_PATH).then(function(e){for(var i=0;i<e.length;i++){var t=e[i];if(!n.has(t.name)){var r=0==t.type?0:4,o=new UserProfile_1.UserProfile([r]);n.add_file(t.name,o)}}})})}}]),SpinalAdminInit}();exports.SpinalAdminInit=SpinalAdminInit;

},{"./Models/AppProfile":3,"./Models/AppProfileLst":4,"./Models/Role":5,"./Models/RoleLst":6,"./Models/UserProfile":7,"./loadModelPtr":10,"spinal-core-connectorjs_type":1}],9:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("spinal-env-drive-core");var SpinalAccesRightsService_1=require("./SpinalAccesRightsService"),angular=require("angular");angular.module("app.services").run(["authService","ngSpinalCore",function(e,i){SpinalAccesRightsService_1.SpinalAdminInit.init(e,i)}]);

},{"./SpinalAccesRightsService":8,"angular":"angular","spinal-env-drive-core":18}],10:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var spinal_core_connectorjs_type_1=require("spinal-core-connectorjs_type"),mapModelDictionary=new Map;function loadModelPtr(e){if(e instanceof spinal_core_connectorjs_type_1.File)return loadModelPtr(e._ptr);if(!(e instanceof spinal_core_connectorjs_type_1.Ptr))throw new Error("loadModelPtr must take Ptr as parameter");if(!e.data.value&&e.data.model)return Promise.resolve(e.data.model);if(!e.data.value)throw new Error("Trying to load a Ptr to 0");if(mapModelDictionary.has(e.data.value))return mapModelDictionary.get(e.data.value);if(void 0!==spinal_core_connectorjs_type_1.FileSystem._objects[e.data.value]){var o=Promise.resolve(spinal_core_connectorjs_type_1.FileSystem._objects[e.data.value]);return mapModelDictionary.set(e.data.value,o),o}var t=new Promise(function(o,t){e.load(function(a){a?o(a):(mapModelDictionary.delete(e.data.value),t(new Error("Error in load Ptr")))})});return mapModelDictionary.set(e.data.value,t),t}exports.loadModelPtr=loadModelPtr,exports.default=loadModelPtr;

},{"spinal-core-connectorjs_type":1}],11:[function(require,module,exports){
"use strict";!function(){var t=require("angular"),e=require("d3");t.module("app.spinal-panel").controller("ServerStatusCtrl",["$scope","$injector","$mdToast","$interval","$timeout","$mdDialog","$q","SpinalServerStatusService","layout_uid",function(t,s,a,r,n,o,l,u,i){var c;t.injector=s,t.users=[],t.uid=i.get(),t.statusLst=[];var d=null;function wait_DOM_RDY(t){var s=l.defer();return function wait_DOM_RDY_rec(t,s){var a=e.select("#"+s.id);a._groups[0][0]?t.resolve(a):setTimeout(function(){wait_DOM_RDY_rec(t,s)},200)}(s,t),s.promise}function update_or_push_Status(s,a,r){var n=function(e){for(var s=0;s<t.statusLst.length;s++)if(t.statusLst[s].name===e)return t.statusLst[s];return null}(s);n?n.value=a:(n={name:s,value:a,id:"spark_"+s+"_"+t.uid},t.statusLst.push(n)),wait_DOM_RDY(n).then(function(){!function(t,s){s.forEach(function(t,e){s[e]=parseInt(s[e])});for(var a=0;a<s.length;a++)isNaN(s[a])&&(s.splice(a,1),a-=1);var r=e.select("#"+t.id);r.select("svg").remove();var n=r.append("svg").attr("width","100%").attr("height","50px");d=n;var o=parseInt(n.style("height"));c=parseInt(n.style("width"));var l=e.scaleLinear().domain([0,s.length]).range([0,c]),u=e.max(s),i=e.scaleLinear().domain([0,u]).range([o,0]),p=e.line().x(function(t,e){return l(e)}).y(function(t){return i(t)});n.append("path").data([s]).attr("class","line").attr("d",p);var _=n.append("g").attr("class","mouse-over-effects");_.append("path").attr("class","mouse-line").style("stroke","#96ceff").style("stroke-width","1px").style("opacity","0");var f=_.selectAll(".mouse-per-line").data([1]).enter().append("g").attr("class","mouse-per-line");f.append("circle").attr("r",5).style("stroke","#96ceff").style("fill","none").style("stroke-width","1px").style("opacity","0");var g=f.append("g").attr("transform","translate(-3,17)").style("opacity","0");g.append("rect").attr("fill","#96ceff"),g.append("text").attr("text-anchor","end"),_.append("svg:rect").attr("width",c).attr("height",o).attr("fill","none").attr("pointer-events","all").on("mouseout",function(){_.select(".mouse-line").style("opacity","0"),f.select(".mouse-per-line circle").style("opacity","0"),f.select(".mouse-per-line g").style("opacity","0")}).on("mouseover",function(){_.select(".mouse-line").style("opacity","1"),f.select(".mouse-per-line circle").style("opacity","1"),f.select(".mouse-per-line g").style("opacity","1")}).on("mousemove",function(){var t=e.mouse(this);_.select(".mouse-line").attr("d",function(){var e=Math.floor(l.invert(t[0])),s=Math.floor(l(e)),a="M"+s+","+o;return a+=" "+s+",0"}),_.selectAll(".mouse-per-line").attr("transform",function(){var a=Math.floor(l.invert(t[0])),r=Math.floor(l(a)),n=s[a],o=i(n),c=e.select(this).select("text"),d=e.select(this).select("g");n<u/2?d.attr("transform","translate(-3,-17)"):d.attr("transform","translate(-3,25)");var p=e.select(this).select("rect");c.text(n.toFixed(0));var _=c.node().getBBox();return p.attr("x",_.x-2).attr("y",_.y-2).attr("width",_.width+4).attr("height",_.height+4),"translate("+r+","+o+")"})})}(n,r)})}function draw(){update_or_push_Status("count_models",t.statusModel.count_models.get(),t.statusModel.data.count_models.get().split(";")),update_or_push_Status("count_sessions",t.statusModel.count_sessions.get(),t.statusModel.data.count_sessions.get().split(";")),update_or_push_Status("count_users",t.statusModel.count_users.get(),t.statusModel.data.count_users.get().split(";")),update_or_push_Status("ram_usage_res",t.statusModel.ram_usage_res.get(),t.statusModel.data.ram_usage_res.get().split(";")),update_or_push_Status("ram_usage_virt",t.statusModel.ram_usage_virt.get(),t.statusModel.data.ram_usage_virt.get().split(";"))}t.statusModel=null,t.backupClick=function(){t.statusModel.btn.backup.set(1)},t.garbageCollectorClick=function(){t.statusModel.btn.garbageCollector.set(1)},t.isBackupDisabled=function(){return!t.statusModel||0!==t.statusModel.btn.backup.get()},t.isGrbageCollectorDisabled=function(){return!t.statusModel||0!==t.statusModel.btn.garbageCollector.get()},u.init().then(function(e){t.statusModel=e,draw();t.statusModel.bind(draw);var s=setInterval(function(){var t=parseInt(d.style("width"));c!=t&&(c=t,draw())},600);t.$on("$destroy",function(){clearInterval(s),t.statusModel.unbind(draw),s=void 0})})}])}();

},{"angular":"angular","d3":"d3"}],12:[function(require,module,exports){
"use strict";var angular=require("angular");angular.module("app.spinal-panel").factory("SpinalServerStatusService",["authService","$q","ngSpinalCore",function(t,e,r){var n={init:function(){if(n.statusModel){var a=e.defer();return a.resolve(n.statusModel),a.promise}return t.wait_connect().then(function(){return r.load("/etc/Status").then(function(t){return n.statusModel=t,n.statusModel})},function(){var t="not able to load : /etc/Status";console.error(t),a.reject(t)})}};return n}]);

},{"angular":"angular"}],13:[function(require,module,exports){
"use strict";require("./SpinalServerStatusService"),require("./ServerStatusCtrl");var angular=require("angular");angular.module("app.spinal-panel").run(["$templateCache","$http","goldenLayoutService",function(t,e,a){for(var n=function(a,n){e.get(a).then(function(e){t.put(n,e.data)},function(){console.log("Cannot load the file "+a)})},l=[{uri:"../templates/spinal-env-admin-panel-hub-status/hub-status-panel.html",name:"hub-status-panel.html"}],u=0;u<l.length;u++)n(l[u].uri,l[u].name);a.registerPanel({id:"drag-hub-status-panel",name:"SpinalHub Status",cfg:{isClosable:!0,title:"SpinalHub Status",type:"component",width:20,componentName:"SpinalHome",componentState:{template:"hub-status-panel.html",module:"app.spinal-panel",controller:"ServerStatusCtrl"}}})}]);

},{"./ServerStatusCtrl":11,"./SpinalServerStatusService":12,"angular":"angular"}],14:[function(require,module,exports){
"use strict";window.angular.module("app.spinal-panel").controller("userManagerPanelIframeCtrl",[function(){}]),window.angular.module("app.spinal-panel").run(["$templateCache","$http","goldenLayoutService",function(e,a,n){for(var l=function(n,l){a.get(n).then(function(a){e.put(l,a.data)},function(){console.log("Cannot load the file "+n)})},t=[{uri:"../templates/spinal-env-admin-panel-user-manager/user-manager-panel-iframe.html",name:"user-manager-panel-iframe.html"}],r=0;r<t.length;r++)l(t[r].uri,t[r].name);n.registerPanel({id:"drag-users-list-panel",name:"User Manager",cfg:{isClosable:!0,title:"User Manager",type:"component",width:20,componentName:"SpinalHome",componentState:{template:"user-manager-panel-iframe.html",module:"app.spinal-panel",controller:"userManagerPanelIframeCtrl"}}})}]);

},{}],15:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,i,n){return i&&defineProperties(e.prototype,i),n&&defineProperties(e,n),e}}();function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}require("spinal-core-connectorjs");var SpinalDrive_App=function(){function SpinalDrive_App(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";_classCallCheck(this,SpinalDrive_App),this.name=e,this.label=i,this.id=n,this.icon=t,this.description=r,this.order_priority=0}return _createClass(SpinalDrive_App,[{key:"action",value:function(){}},{key:"log",value:function(e,i,n){var t={date:Date.now(),name:i,action:n};SpinalDrive_App._log(e,t)}},{key:"launch_action",value:function(e){if(e.file){var i=e.scope.injector.get("authService").get_user().username,n=e.item.name;this.log(window.FileSystem._objects[e.file._server_id],i,n)}this.action(e)}},{key:"is_shown",value:function(){return!0}}]),SpinalDrive_App}();SpinalDrive_App.ptrRdy_defer=function(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.data.value&&!window.FileSystem._tmp_objects[e.data.value]?window.FileSystem._objects[e.data.value]?i({model:window.FileSystem._objects[e.data.value],firstTime:n}):e.load(function(e){i({model:e,firstTime:!0})}):setTimeout(function(){SpinalDrive_App.ptrRdy_defer(e,i,!0)},200)},SpinalDrive_App.waitPtrRdy=function(e){return new Promise(function(i){SpinalDrive_App.ptrRdy_defer(e,i)})},SpinalDrive_App._getOrCreate_log=function(e){return new Promise(function(i,n){if(e&&e._info)if(e._info.log)SpinalDrive_App.waitPtrRdy(e._info.log).then(function(e){var t=e.model;t?i(t):n()});else{var t=new window.Lst;e._info.add_attr({log:new window.Ptr(t)}),i(t)}})},SpinalDrive_App._log=function(e,i){SpinalDrive_App._getOrCreate_log(e).then(function(e){SpinalDrive_App._pushLog(e,i)},function(){console.error("error SpinalDrive_App._getOrCreate_log : model is not a File or doesn't have _info")})},SpinalDrive_App._pushLog=function(e,i){e.push(i)},module.exports=SpinalDrive_App;

},{"spinal-core-connectorjs":"spinal-core-connectorjs"}],16:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}return function(i,e,t){return e&&defineProperties(i.prototype,e),t&&defineProperties(i,t),i}}();function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var SpinalDrive_App=require("./SpinalDrive_App"),SpinalDrive_App_list=function(){function SpinalDrive_App_list(){_classCallCheck(this,SpinalDrive_App_list),this._list=[]}return _createClass(SpinalDrive_App_list,[{key:"is_valid_obj",value:function(i){return void 0!==i.name&&void 0!==i.label&&void 0!==i.id&&void 0!==i.icon&&void 0!==i.description}},{key:"push",value:function(i){if(i instanceof SpinalDrive_App||this.is_valid_obj(i)){for(var e=0;e<this._list.length;e++)if(this._list[e].name===i.name)return void(this._list[e]=i);this._list.push(i)}else console.error("Error trying to Push not a SpinalDrive_App Object or equivalent.")}},{key:"remove_by_name",value:function(i){if(void 0!==i)for(var e=0;e<this._list.length;e++)if(i===this._list[e].name)return this._list.splice(e,1),!0;return!1}},{key:"remove_by_id",value:function(i){if(void 0!==i)for(var e=0;e<this._list.length;e++)if(i===this._list[e].id)return this._list.splice(e,1),!0;return!1}},{key:"get",value:function(i){return void 0===i?this._list[i]:this._list}},{key:"length",value:function(){return this._list.length}},{key:"get_by_name",value:function(i){for(var e=0;e<this._list.length;e++)if(i===this._list[e].name)return this._list[e];return 0}}]),SpinalDrive_App_list}();module.exports=SpinalDrive_App_list;

},{"./SpinalDrive_App":15}],17:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,i,n){return i&&defineProperties(e.prototype,i),n&&defineProperties(e,n),e}}();function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var SpinalDrive_App_list=require("./SpinalDrive_App_list"),SpinalDrive_Env=function(){function SpinalDrive_Env(){_classCallCheck(this,SpinalDrive_Env),this.containerLst={},this.context_file_exp_app_icon={Directory:"folder",Session:"desktop_windows",default:"insert_drive_file"}}return _createClass(SpinalDrive_Env,[{key:"add_applications",value:function(e,i){return this.containerLst[e]||(this.containerLst[e]=new SpinalDrive_App_list),this.containerLst[e].push(i)}},{key:"get_applications",value:function(e,i){return this.containerLst[e]||(this.containerLst[e]=new SpinalDrive_App_list),this.containerLst[e]._list.filter(function(e){return e.is_shown(i)}).sort(function(e,i){return e.order_priority<i.order_priority})}}]),SpinalDrive_Env}();module.exports=SpinalDrive_Env;

},{"./SpinalDrive_App_list":16}],18:[function(require,module,exports){
"use strict";module.exports={},module.exports.SpinalDrive_App_list=require("./core/SpinalDrive_App_list"),module.exports.SpinalDrive_App=require("./core/SpinalDrive_App"),module.exports.SpinalDrive_Env=require("./core/SpinalDrive_Env");var spinalDrive_Env=new module.exports.SpinalDrive_Env;window&&(window.spinalDrive_Env=spinalDrive_Env);

},{"./core/SpinalDrive_App":15,"./core/SpinalDrive_App_list":16,"./core/SpinalDrive_Env":17}],19:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(e,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,r,i){return r&&defineProperties(e.prototype,r),i&&defineProperties(e,i),e}}();function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}require("spinal-core-connectorjs");var spinalEnvDriveCore=require("spinal-env-drive-core"),angular=require("angular"),SpinalDrive_App_FileExplorer_delete=function(e){function SpinalDrive_App_FileExplorer_delete(){_classCallCheck(this,SpinalDrive_App_FileExplorer_delete);var e=_possibleConstructorReturn(this,(SpinalDrive_App_FileExplorer_delete.__proto__||Object.getPrototypeOf(SpinalDrive_App_FileExplorer_delete)).call(this,"DeleleFileExplorer","Delete",1,"delete","Delete the file"));return e.order_priority=-1,e}return _inherits(SpinalDrive_App_FileExplorer_delete,spinalEnvDriveCore.SpinalDrive_App),_createClass(SpinalDrive_App_FileExplorer_delete,[{key:"action",value:function(e){var r=e.scope.injector.get("$mdDialog"),i="Are you sure to delete the file / folder";e&&e.file&&e.file.name&&(i+=" : "+e.file.name);var t=r.confirm().title("Delete").textContent(i).ariaLabel("Delete Directory file").clickOutsideToClose(!0).ok("Confirm").cancel("Cancel");r.show(t).then(function(){if(e&&e.scope&&e.scope.curr_dir&&e.file&&e.file._server_id){var r=window.FileSystem._objects[e.file._server_id];if(r)for(var i=e.scope.curr_dir,t=0;t<i.length;t++)if(i[t]._server_id==r._server_id&&e.file.name==i[t].name.get()){i.remove_ref(i[t]);break}}},function(){})}},{key:"is_shown",value:function(e){if(e&&e.file&&e.file._server_id){var r=window.FileSystem._objects[e.file._server_id];if(r&&r._info&&r._info.model_type)return"Synchronized Directory"!==r._info.model_type.get()&&"HttpPath"!==r._info.model_type.get()}return!1}}]),SpinalDrive_App_FileExplorer_delete}();module.exports.SpinalDrive_App_FileExplorer_delete=SpinalDrive_App_FileExplorer_delete;var SpinalDrive_App_FolderExplorer_delete=function(e){function SpinalDrive_App_FolderExplorer_delete(){return _classCallCheck(this,SpinalDrive_App_FolderExplorer_delete),_possibleConstructorReturn(this,(SpinalDrive_App_FolderExplorer_delete.__proto__||Object.getPrototypeOf(SpinalDrive_App_FolderExplorer_delete)).call(this,"DeleleFolderExplorer","Delete",0,"fa fa-trash text-danger","Delete the file"))}return _inherits(SpinalDrive_App_FolderExplorer_delete,spinalEnvDriveCore.SpinalDrive_App),_createClass(SpinalDrive_App_FolderExplorer_delete,[{key:"is_shown",value:function(e){if("#"===e.parent)return!1;if(e&&e.original&&e.original.fileId){var r=window.FileSystem._objects[e.original.fileId];if(r&&r._info&&r._info.model_type)return"Synchronized Directory"!==r._info.model_type.get()&&"HttpPath"!==r._info.model_type.get()}return!1}},{key:"action",value:function(e){var r=e.scope.injector.get("$mdDialog"),i=window.FileSystem._objects[e.node.original.fileId];if(i&&i._info&&i._info.visaValidation)r.show(r.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title("Sorry").textContent("Sorry this file has already been sent for validation !!!").ariaLabel("Alert").ok("OK").targetEvent(e.evt));else{var t="Are you sure to delete the folder";e&&e.node&&e.node.text&&(t+=" : "+e.node.text);var l=r.confirm().title("Delete").textContent(t).ariaLabel("Delete Directory file").clickOutsideToClose(!0).ok("Confirm").cancel("Cancel");r.show(l).then(function(){var r=window.FileSystem._objects[e.node.original.pDirId];r&&r.remove_ref(i)},function(){})}}}]),SpinalDrive_App_FolderExplorer_delete}();module.exports.SpinalDrive_App_FolderExplorer_delete=SpinalDrive_App_FolderExplorer_delete;var SpinalDrive_App_FileExplorer_currdir_delete=function(e){function SpinalDrive_App_FileExplorer_currdir_delete(){_classCallCheck(this,SpinalDrive_App_FileExplorer_currdir_delete);var e=_possibleConstructorReturn(this,(SpinalDrive_App_FileExplorer_currdir_delete.__proto__||Object.getPrototypeOf(SpinalDrive_App_FileExplorer_currdir_delete)).call(this,"DeleleFileExplorer_currdir","Delete Selected",1,"delete","Delete the selected file(s)"));return e.order_priority=-1,e}return _inherits(SpinalDrive_App_FileExplorer_currdir_delete,spinalEnvDriveCore.SpinalDrive_App),_createClass(SpinalDrive_App_FileExplorer_currdir_delete,[{key:"action",value:function(e){for(var r=e.scope.injector.get("$mdDialog"),i="Are you sure to delete the file(s) / folder(s)",t=[],l=[],o=0;o<e.scope.directory.length;o++)!0===e.scope.directory[o].selected&&("HttpPath"!==e.scope.directory[o].model_type||"Synchronized Directory"!==e.scope.directory[o].model_type?l.push(e.scope.directory[o]):t.push(e.scope.directory[o]));t.length>0&&(i+=" : "+t.map(function(e){return e.name}).join(", ")),l.length>0&&(i+=" \n ignored: "+l.map(function(e){return e.name}).join(", "));var n=r.confirm().title("Delete").textContent(i).ariaLabel("Delete Directory file").clickOutsideToClose(!0).ok("Confirm").cancel("Cancel");r.show(n).then(function(){for(var r=e.model,i=0;i<t.length;i++){var l=window.FileSystem._objects[t[i]._server_id];if(l)for(var o=0;o<r.length;o++)if(r[o]._server_id==l._server_id&&t[i].name==r[o].name.get()){r.remove_ref(r[o]);break}}},function(){})}},{key:"is_shown",value:function(e){for(var r=0;r<e.scope.directory.length;r++)if(!0===e.scope.directory[r].selected)return!0;return!1}}]),SpinalDrive_App_FileExplorer_currdir_delete}();module.exports.SpinalDrive_App_FileExplorer_currdir_delete=SpinalDrive_App_FileExplorer_currdir_delete;

},{"angular":"angular","spinal-core-connectorjs":"spinal-core-connectorjs","spinal-env-drive-core":18}],20:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(e,o){for(var r=0;r<o.length;r++){var n=o[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,o,r){return o&&defineProperties(e.prototype,o),r&&defineProperties(e,r),e}}();function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}var spinalEnvDriveCore=require("spinal-env-drive-core"),SpinalDrive_App=spinalEnvDriveCore.SpinalDrive_App,SpinalDrive_App_FileExplorer_Download=function(e){function SpinalDrive_App_FileExplorer_Download(){return _classCallCheck(this,SpinalDrive_App_FileExplorer_Download),_possibleConstructorReturn(this,(SpinalDrive_App_FileExplorer_Download.__proto__||Object.getPrototypeOf(SpinalDrive_App_FileExplorer_Download)).call(this,"DownloadFileExplorer","Download...",15,"file_download","Download a File"))}return _inherits(SpinalDrive_App_FileExplorer_Download,SpinalDrive_App),_createClass(SpinalDrive_App_FileExplorer_Download,[{key:"action",value:function(e){var o=e.scope.injector.get("$mdDialog"),r=window.FileSystem._objects[e.file._server_id],n=o.confirm().title("Do you want download "+r.name.get()+" ?").ariaLabel("Download").clickOutsideToClose(!0).ok("Download!").cancel("Cancel");o.show(n).then(function(){if("Path"==r._info.model_type.get()){var e=document.createElement("a");e.setAttribute("href","/sceen/_?u="+r._ptr.data.value),e.setAttribute("download",r.name.get()),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},function(){})}},{key:"is_shown",value:function(e){if(e&&e.file&&e.file._server_id){var o=window.FileSystem._objects[e.file._server_id];if(o&&o._info&&o._info.model_type&&"Path"===o._info.model_type.get())return!0}return!1}}]),SpinalDrive_App_FileExplorer_Download}();module.exports.FileExplorerDownload=SpinalDrive_App_FileExplorer_Download;

},{"spinal-env-drive-core":18}],21:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var spinalEnvDriveCore=require("spinal-env-drive-core"),angular=require("angular"),SpinalDrive_App_Edit=function(e){function SpinalDrive_App_Edit(){return _classCallCheck(this,SpinalDrive_App_Edit),_possibleConstructorReturn(this,(SpinalDrive_App_Edit.__proto__||Object.getPrototypeOf(SpinalDrive_App_Edit)).apply(this,arguments))}return _inherits(SpinalDrive_App_Edit,spinalEnvDriveCore.SpinalDrive_App),SpinalDrive_App_Edit}();SpinalDrive_App_Edit.DialogEditCtrl=function(e,t,i){var n=window.FileSystem._objects[i];e.editModel=n,e.modelData=n.get(),e.editModelContruct=n.constructor.name,e.editForm={},e.cancelDialog=function(){t.hide()},e.submitDialog=function(){n.set(e.editForm.modelData.$modelValue),t.hide()},e.isStr=function(e){return e instanceof window.Str},e.isVal=function(e){return e instanceof window.Val},e.isBool=function(e){return e instanceof window.Bool}},angular.module("app.spinal-panel").run(["$templateCache","$http",function(e,t){for(var i=function(i,n){t.get(i).then(function(t){e.put(n,t.data)},function(){console.log("Cannot load the file "+i)})},n=[{uri:"../templates/spinal-env-drive-plugin-base/SpinalDrive_App_Edit_EditTemplate.html",name:"SpinalDrive_App_Edit_EditTemplate.html"}],r=0;r<n.length;r++)i(n[r].uri,n[r].name)}]);var SpinalDrive_App_Inspector_edit=function(e){function SpinalDrive_App_Inspector_edit(){return _classCallCheck(this,SpinalDrive_App_Inspector_edit),_possibleConstructorReturn(this,(SpinalDrive_App_Inspector_edit.__proto__||Object.getPrototypeOf(SpinalDrive_App_Inspector_edit)).call(this,"EditInspector","Edit...",3,"edit","Edit Atomic Models..."))}return _inherits(SpinalDrive_App_Inspector_edit,SpinalDrive_App_Edit),_createClass(SpinalDrive_App_Inspector_edit,[{key:"action",value:function(e){var t=e.scope.injector.get("spinalModelDictionary"),i=e.scope.injector.get("$mdDialog"),n=e.scope.injector.get("ngSpinalCore"),r=e.scope.injector.get("$templateCache");i.show({ariaLabel:"Edit",controller:["$scope","$mdDialog","model_server_id",SpinalDrive_App_Edit.DialogEditCtrl],template:r.get("SpinalDrive_App_Edit_EditTemplate.html"),parent:angular.element(document.body),clickOutsideToClose:!0,locals:{model_server_id:e.model_server_id,spinalModelDictionary:t,mdDialog:i,ngSpinalCore:n}})}},{key:"is_shown",value:function(e){if(e&&e.data&&e.data._server_id){var t=window.FileSystem._objects[e.data._server_id];if(t)return t instanceof window.Val||t instanceof window.Bool||t instanceof window.Str}return!1}}]),SpinalDrive_App_Inspector_edit}();module.exports.InspectorEdit=SpinalDrive_App_Inspector_edit;

},{"angular":"angular","spinal-env-drive-core":18}],22:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(e,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,o){return r&&defineProperties(e.prototype,r),o&&defineProperties(e,o),e}}();function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var spinalEnvDriveCore=require("spinal-env-drive-core"),SpinalDrive_App=spinalEnvDriveCore.SpinalDrive_App,Directory=window.spinalCore._def.Directory,SpinalDrive_App_FileExplorer_currdir_newFolder=function(e){function SpinalDrive_App_FileExplorer_currdir_newFolder(){return _classCallCheck(this,SpinalDrive_App_FileExplorer_currdir_newFolder),_possibleConstructorReturn(this,(SpinalDrive_App_FileExplorer_currdir_newFolder.__proto__||Object.getPrototypeOf(SpinalDrive_App_FileExplorer_currdir_newFolder)).call(this,"NewFolderFileExplorerCurrDir","New Folder...",1,"create_new_folder","Create a new Folder"))}return _inherits(SpinalDrive_App_FileExplorer_currdir_newFolder,SpinalDrive_App),_createClass(SpinalDrive_App_FileExplorer_currdir_newFolder,[{key:"action",value:function(e){var r=this,o=e.scope.injector.get("$mdDialog"),i=e.scope.injector.get("spinalFileSystem"),l=o.prompt().title("New Folder").placeholder("Untitled folder").ariaLabel("New Folder").initialValue("Untitled folder").clickOutsideToClose(!0).required(!0).ok("Create!").cancel("Cancel");e.original={model:e.model._server_id},o.show(l).then(function(o){if(!1!==/^[a-z0-9 ._-]+(\.[a-z0-9_-]+)?$/gim.test(o)){i.newFolder(null,e,o);var l=e.scope.injector.get("authService").get_user().username;r.log(e.model[e.model.length-1],l,e.item.description)}else{var t=e.scope.injector.get("$mdToast");t.show(t.simple().theme("error-toast").textContent('The name "'+o+'" is not a valid name.'))}},function(){})}}]),SpinalDrive_App_FileExplorer_currdir_newFolder}();module.exports.FileExplorerCurrDirNewFolder=SpinalDrive_App_FileExplorer_currdir_newFolder;var SpinalDrive_App_FolderExplorer_newFolder=function(e){function SpinalDrive_App_FolderExplorer_newFolder(){return _classCallCheck(this,SpinalDrive_App_FolderExplorer_newFolder),_possibleConstructorReturn(this,(SpinalDrive_App_FolderExplorer_newFolder.__proto__||Object.getPrototypeOf(SpinalDrive_App_FolderExplorer_newFolder)).call(this,"NewFolderFolderExplorer","New Folder...",1,"fa fa-folder","Create a new Folder"))}return _inherits(SpinalDrive_App_FolderExplorer_newFolder,SpinalDrive_App),_createClass(SpinalDrive_App_FolderExplorer_newFolder,[{key:"action",value:function(e){var r=this,o=e.scope.injector.get("$mdDialog"),i=e.scope.injector.get("ngSpinalCore"),l=o.prompt().title("New Folder").placeholder("Untitled folder").ariaLabel("New Folder").clickOutsideToClose(!0).initialValue("Untitled folder").required(!0).ok("Create!").cancel("Cancel");o.show(l).then(function(o){if(!1!==/^[a-z0-9 ._-]+(\.[a-z0-9_-]+)?$/gim.test(o)){var l=window.FileSystem._objects[e.node.original.fileId];if(l)return i.loadModelPtr(l).then(function(i){if(i){i.force_add_file(o,new Directory,{model_type:"Directory"});var l=e.scope.injector.get("authService").get_user().username;r.log(i[i.length-1],l,r.description)}})}else{var t=e.scope.injector.get("$mdToast");t.show(t.simple().theme("error-toast").textContent('The name "'+o+'" is not a valid name.'))}},function(){})}}]),SpinalDrive_App_FolderExplorer_newFolder}();module.exports.FolderExplorerNewFolder=SpinalDrive_App_FolderExplorer_newFolder;

},{"spinal-env-drive-core":18}],23:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,r,n){return r&&defineProperties(e.prototype,r),n&&defineProperties(e,n),e}}();function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var spinalEnvDriveCore=require("spinal-env-drive-core"),SpinalDrive_App=spinalEnvDriveCore.SpinalDrive_App,spinalCore=require("spinal-core-connectorjs"),FileSystem=spinalCore._def.FileSystem,SpinalDrive_App_FileExplorer_rename=function(e){function SpinalDrive_App_FileExplorer_rename(){return _classCallCheck(this,SpinalDrive_App_FileExplorer_rename),_possibleConstructorReturn(this,(SpinalDrive_App_FileExplorer_rename.__proto__||Object.getPrototypeOf(SpinalDrive_App_FileExplorer_rename)).call(this,"RenameFileExplorer","Rename...",1,"edit","Rename a File"))}return _inherits(SpinalDrive_App_FileExplorer_rename,SpinalDrive_App),_createClass(SpinalDrive_App_FileExplorer_rename,[{key:"action",value:function(e){var r=e.scope.injector.get("$mdDialog"),n=FileSystem._objects[e.file._server_id],t=r.prompt().title("Rename").placeholder("File Name").ariaLabel("Rename").clickOutsideToClose(!0).required(!0).ok("Rename!").cancel("Cancel");n&&n.name&&n.name.get()&&t.initialValue(n.name.get()),r.show(t).then(function(r){if(n.name.get()!==r){if(!1!==/^[a-z0-9 ._-]+(\.[a-z0-9_-]+)?$/gim.test(r)){for(var t=0;t<e.scope.curr_dir.length;t++)if(e.scope.curr_dir[t].name.get()===r){var i=e.scope.injector.get("$mdToast");return void i.show(i.simple().theme("error-toast").textContent("Error rename: File with this name already exist."))}n.name.set(r)}else{var o=e.scope.injector.get("$mdToast");o.show(o.simple().theme("error-toast").textContent('The name "'+r+'" is not a valid name.'))}}},function(){})}}]),SpinalDrive_App_FileExplorer_rename}();module.exports.FileExplorerRename=SpinalDrive_App_FileExplorer_rename;

},{"spinal-core-connectorjs":"spinal-core-connectorjs","spinal-env-drive-core":18}],24:[function(require,module,exports){
"use strict";var _createClass=function(){function defineProperties(e,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,r,i){return r&&defineProperties(e.prototype,r),i&&defineProperties(e,i),e}}();function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var spinalCore=require("spinal-core-connectorjs"),spinalEnvDriveCore=require("spinal-env-drive-core"),SpinalDrive_App=spinalEnvDriveCore.SpinalDrive_App,angular=require("angular"),FileSystem=spinalCore._def.FileSystem,Ptr=spinalCore._def.Ptr,SpinalDrive_App_share=function(e){function SpinalDrive_App_share(){return _classCallCheck(this,SpinalDrive_App_share),_possibleConstructorReturn(this,(SpinalDrive_App_share.__proto__||Object.getPrototypeOf(SpinalDrive_App_share)).apply(this,arguments))}return _inherits(SpinalDrive_App_share,SpinalDrive_App),SpinalDrive_App_share}();SpinalDrive_App_share.DialogShareCtrl=function(e,r,i,t,n,a){function create_right_col(e,r){return e&r?"Yes":"No"}t.init().then(function(){e.users=t.users.get(),e.rightRead=!1,e.rightWrite=!1,e.rightShare=!1,e.users.forEach(function(e){e.share_selected=!1,e._lowername=e.name.toLowerCase()});var r=FileSystem._objects[i],n=0;n=r instanceof File?r._ptr.data.value:r instanceof Ptr?r.data.value:r._server_id,a.load_right(n).then(function(r){!function(r){e.selectedModelShared_to_user=[];for(var i=0;i<r.length;i++){var t=r[i];e.selectedModelShared_to_user.push({id:t.user.id.get(),name:t.user.name.get(),rd:create_right_col(t.flag.get(),spinalCore.right_flag.RD),wr:create_right_col(t.flag.get(),spinalCore.right_flag.WR),ad:create_right_col(t.flag.get(),spinalCore.right_flag.AD)})}}(r)},function(){console.error("load_right: couldn't load the right of the model "+i)})}),e.transformChip=function(e){return angular.isObject(e)?e:{name:e,type:"new"}},e.error_msgs=[],e.chip_users=[],e.selectedItem=null,e.searchText=null,e.querySearch=function(r){return r?e.users.filter(function(r){var i=r.toLowerCase();return function(r){return(0===r._lowername.indexOf(i)||0===r.id.toString().indexOf(i))&&!1===e.chip_users.some(function(e){return e.id===r.id})}}(r)):e.users.filter(function(r){return!1===e.chip_users.some(function(e){return e.id===r.id})})},e.cancelDialog=function(){r.hide()},e.submitDialog=function(){var t=0;if(e.error_msgs=[],1==e.rightRead&&(t|=spinalCore.right_flag.RD),1==e.rightWrite&&(t|=spinalCore.right_flag.WR),1==e.rightShare&&(t|=spinalCore.right_flag.AD),0==e.chip_users.length&&e.error_msgs.push("Add some user(s) to share."),0==t&&e.error_msgs.push("Please select access rights level."),0==e.error_msgs.length){var n=FileSystem._objects[i],o="";o=n.name?n.name.get():n.constructor.name+"_"+n._server_id;for(var l=0;l<e.chip_users.length;l++)a.share_model(n,o,t,e.chip_users[l].name);r.hide()}}},angular.module("app.spinal-panel").run(["$templateCache","$http",function(e,r){for(var i=function(i,t){r.get(i).then(function(r){e.put(t,r.data)},function(){console.log("Cannot load the file "+i)})},t=[{uri:"../templates/spinal-env-drive-plugin-base/Spinal_App_ShareTemplate.html",name:"Spinal_App_ShareTemplate.html"}],n=0;n<t.length;n++)i(t[n].uri,t[n].name)}]);var SpinalDrive_App_FileExplorer_share=function(e){function SpinalDrive_App_FileExplorer_share(){return _classCallCheck(this,SpinalDrive_App_FileExplorer_share),_possibleConstructorReturn(this,(SpinalDrive_App_FileExplorer_share.__proto__||Object.getPrototypeOf(SpinalDrive_App_FileExplorer_share)).call(this,"ShareFileExplorer","Share...",2,"share","Share Models with other Users"))}return _inherits(SpinalDrive_App_FileExplorer_share,SpinalDrive_App_share),_createClass(SpinalDrive_App_FileExplorer_share,[{key:"action",value:function(e){console.log(e);var r=e.scope.injector.get("$templateCache"),i=e.scope.injector.get("spinalModelDictionary"),t=e.scope.injector.get("$mdDialog"),n=e.scope.injector.get("ngSpinalCore");t.show({controller:["$scope","$mdDialog","model_server_id","spinalModelDictionary","mdDialog","ngSpinalCore",SpinalDrive_App_share.DialogShareCtrl],template:r.get("Spinal_App_ShareTemplate.html"),parent:angular.element(document.body),targetEvent:e.evt,clickOutsideToClose:!0,locals:{model_server_id:e.file._server_id,spinalModelDictionary:i,mdDialog:t,ngSpinalCore:n}})}}]),SpinalDrive_App_FileExplorer_share}();module.exports.FileExplorerShare=SpinalDrive_App_FileExplorer_share;var SpinalDrive_App_FolderExplorer_share=function(e){function SpinalDrive_App_FolderExplorer_share(){return _classCallCheck(this,SpinalDrive_App_FolderExplorer_share),_possibleConstructorReturn(this,(SpinalDrive_App_FolderExplorer_share.__proto__||Object.getPrototypeOf(SpinalDrive_App_FolderExplorer_share)).call(this,"ShareFolderExplorer","Share...",3,"fa fa-share-alt","Share Models with other Users"))}return _inherits(SpinalDrive_App_FolderExplorer_share,SpinalDrive_App_share),_createClass(SpinalDrive_App_FolderExplorer_share,[{key:"action",value:function(e){var r=e.scope.injector.get("$templateCache"),i=e.scope.injector.get("spinalModelDictionary"),t=e.scope.injector.get("$mdDialog"),n=e.scope.injector.get("ngSpinalCore");t.show({controller:["$scope","$mdDialog","model_server_id","spinalModelDictionary","mdDialog","ngSpinalCore",SpinalDrive_App_share.DialogShareCtrl],template:r.get("Spinal_App_ShareTemplate.html"),parent:angular.element(document.body),clickOutsideToClose:!0,locals:{model_server_id:Number(e.node.original.fileId),spinalModelDictionary:i,mdDialog:t,ngSpinalCore:n}})}},{key:"is_shown",value:function(e){return"#"!==e.parent}}]),SpinalDrive_App_FolderExplorer_share}();module.exports.FolderExplorerShare=SpinalDrive_App_FolderExplorer_share;var SpinalDrive_App_Inspector_share=function(e){function SpinalDrive_App_Inspector_share(){return _classCallCheck(this,SpinalDrive_App_Inspector_share),_possibleConstructorReturn(this,(SpinalDrive_App_Inspector_share.__proto__||Object.getPrototypeOf(SpinalDrive_App_Inspector_share)).call(this,"ShareInspector","Share...",3,"share","Share Models with other Users"))}return _inherits(SpinalDrive_App_Inspector_share,SpinalDrive_App_share),_createClass(SpinalDrive_App_Inspector_share,[{key:"action",value:function(e){var r=e.scope.injector.get("$templateCache"),i=e.scope.injector.get("spinalModelDictionary"),t=e.scope.injector.get("$mdDialog"),n=e.scope.injector.get("ngSpinalCore");t.show({controller:["$scope","$mdDialog","model_server_id","spinalModelDictionary","mdDialog","ngSpinalCore",SpinalDrive_App_share.DialogShareCtrl],template:r.get("Spinal_App_ShareTemplate.html"),parent:angular.element(document.body),clickOutsideToClose:!0,locals:{model_server_id:e.model_server_id,spinalModelDictionary:i,mdDialog:t,ngSpinalCore:n}})}},{key:"is_shown",value:function(){return!0}}]),SpinalDrive_App_Inspector_share}();module.exports.InspectorShare=SpinalDrive_App_Inspector_share;

},{"angular":"angular","spinal-core-connectorjs":"spinal-core-connectorjs","spinal-env-drive-core":18}],25:[function(require,module,exports){
"use strict";module.extends={},require("spinal-env-drive-core");var spinalDrive_Env=window.spinalDrive_Env;function concat_lib(e){for(var r in e)module.exports[r]=e[r]}concat_lib(require("./base/SpinalDrive_App_delete")),concat_lib(require("./base/SpinalDrive_App_edit")),concat_lib(require("./base/SpinalDrive_App_newFolder")),concat_lib(require("./base/SpinalDrive_App_renameFile")),concat_lib(require("./base/SpinalDrive_App_share")),concat_lib(require("./base/SpinalDrive_App_download")),spinalDrive_Env.add_applications("FileExplorer",new module.exports.SpinalDrive_App_FileExplorer_delete),spinalDrive_Env.add_applications("FileExplorerCurrDir",new module.exports.SpinalDrive_App_FileExplorer_currdir_delete),spinalDrive_Env.add_applications("FolderExplorer",new module.exports.SpinalDrive_App_FolderExplorer_delete),spinalDrive_Env.add_applications("Inspector",new module.exports.InspectorEdit),spinalDrive_Env.add_applications("FolderExplorer",new module.exports.FolderExplorerNewFolder),spinalDrive_Env.add_applications("FileExplorerCurrDir",new module.exports.FileExplorerCurrDirNewFolder),spinalDrive_Env.add_applications("FileExplorer",new module.exports.FileExplorerRename),spinalDrive_Env.add_applications("FileExplorer",new module.exports.FileExplorerShare),spinalDrive_Env.add_applications("FolderExplorer",new module.exports.FolderExplorerShare),spinalDrive_Env.add_applications("Inspector",new module.exports.InspectorShare),spinalDrive_Env.add_applications("FileExplorer",new module.exports.FileExplorerDownload);

},{"./base/SpinalDrive_App_delete":19,"./base/SpinalDrive_App_download":20,"./base/SpinalDrive_App_edit":21,"./base/SpinalDrive_App_newFolder":22,"./base/SpinalDrive_App_renameFile":23,"./base/SpinalDrive_App_share":24,"spinal-env-drive-core":18}]},{},[9,13,14,18,25])
//# sourceMappingURL=spinal-lib-admin-env.js.map
